$(document).ready(function(){"#_=_"==window.location.hash&&(history.replaceState?history.replaceState(null,null,window.location.href.split("#")[0]):window.location.hash=""),$('a[href^="#"]').on("click",function(e){e.preventDefault(),1<$(this).attr("href").length&&$("html,body").animate({scrollTop:$(this.hash).offset().top},800,function(){})});var e,t;if(e="timezoneoffset",!((t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(t[1]):void 0)){var n=new Date;n.setDate(n.getDate()+30),document.cookie="timezoneoffset=3; path=/; expires="+n.toUTCString()}$(".comment__delete").on("click",function(e){e.stopPropagation(),e.preventDefault();var t=confirm("Вы уверены, что хотите удалить этот комментарий?"),n=$(this).parent().attr("action"),o=$(this);t&&$.ajax({url:n,type:"POST",dataType:"json",success:function(e){e.success&&(o.closest(".col-lg-12").remove(),$(".comments__counter").text(e.amount),$(".comments__declension").text(e.declension))},error:function(){o.find(".comment__danger").show(300,function(){setTimeout(function(){$(".comment__danger").hide(300)},2500)})}})}),$(".comment__edit").on("click",function(e){var t=$(this),n=t.siblings(".comment__editForm").find(".comment__editTextarea");$(".comment__editFormWrap").show(),n.show();var o=t.siblings(".comment__text").text(),i=t.siblings(".comment__editForm").find(".help-block");i.show(),n.val(o),n.focus();var c=t.siblings(".comment__text");c.hide(),t.hide();var m=t.siblings(".comment__cancel"),s=t.siblings(".comment__editForm").find(".comment__save");m.show(),s.show(),m.on("click",function(e){s.hide(),m.hide(),n.text("").hide(),c.show(),t.show(),i.hide()})}),$(document).on("click",function(e){0===$(".comments__one").has(e.target).length&&($(".comment__save").hide(),$(".comment__cancel").hide(),$(".comment__editTextarea").text("").hide(),$(".comment__text").show(),$(".comment__edit").show(),$(".help-block").hide())}),$(".comment__editForm").on("beforeSubmit",function(e){e.stopPropagation();var t=$(this).find(".comment__editTextarea").serialize(),n=$(this).attr("action"),o=this;return $.ajax({url:n,type:"POST",dataType:"json",data:t,success:function(e){e?((o=$(o).parent()).find(".comment__save").hide(),o.find(".comment__cancel").hide(),o.find(".comment__editTextarea").text("").hide(),o.find(".comment__text").text(e).show(),o.find(".comment__edit").show(),o.find(".help-block").hide(),o.find(".comment__success").show(300,function(){setTimeout(function(){$(".comment__success").hide(300)},2500)})):((o=$(o).parent()).find(".comment__save").hide(),o.find(".comment__cancel").hide(),o.find(".comment__editTextarea").text("").hide(),o.find(".comment__text").show(),o.find(".comment__edit").show(),o.find(".help-block").hide(),o.find(".comment__danger").show(300,function(){setTimeout(function(){$(".comment__danger").hide(300)},2500)}))},error:function(){(o=$(o).parent()).find(".comment__save").hide(),o.find(".comment__cancel").hide(),o.find(".comment__editTextarea").text("").hide(),o.find(".comment__text").show(),o.find(".comment__edit").show(),o.find(".help-block").hide(),o.find(".comment__danger").show(300,function(){setTimeout(function(){$(".comment__danger").hide(300)},2500)})}}),!1}),$(".singleSocial__likeUpButton, .singleSocial__likeDownButton").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).data("href"),n=$(this);$.ajax({url:t,type:"POST",dataType:"json",success:function(e){e.success&&($(".singleSocial__likeUpButton, .singleSocial__likeDownButton").children().removeClass("active"),n.children().addClass("active"),$(".singleSocial__likeUpCount").text(e.likes_amount),$(".singleSocial__likeDownCount").text(e.dislikes_amount))},error:function(){}})})});